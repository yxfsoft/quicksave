# QuickSave äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

> ç‰ˆæœ¬: 1.1 | æ›´æ–°æ—¥æœŸ: 2026-01-22

## 1. äº§å“æ¦‚è¿°

### 1.1 äº§å“å®šä½

- **äº§å“åç§°**: QuickSave (ä¸€é”®æ”¶è—ç³»ç»Ÿ)
- **äº§å“å½¢æ€**: Windows æ¡Œé¢å®¢æˆ·ç«¯ + æµè§ˆå™¨æ‰©å±• + Web ç®¡ç†å¹³å°
- **ç›®æ ‡ç”¨æˆ·**: çŸ¥è¯†å·¥ä½œè€…ã€å†…å®¹åˆ›ä½œè€…ã€å¼€å‘è€…
- **æ ¸å¿ƒä»·å€¼**: é€šè¿‡å…¨å±€å¿«æ·é”®ä¸€é”®æ”¶è—æ¥è‡ªå„ç§è½¯ä»¶å’Œç½‘ç«™çš„å†…å®¹ï¼Œè‡ªåŠ¨æ™ºèƒ½åˆ†ç±»å’Œæ ‡ç­¾

### 1.2 äº§å“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ç”¨æˆ·å±‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Flutter Desktop â”‚  Browser Extensionâ”‚      Flutter Web         â”‚
â”‚  (Windows å®¢æˆ·ç«¯) â”‚   (Chrome/Edge)   â”‚     (Web ç®¡ç†é¢æ¿)       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â€¢ å…¨å±€å¿«æ·é”®     â”‚  â€¢ ç½‘é¡µå†…å®¹æŠ“å–   â”‚  â€¢ æ”¶è—å†…å®¹ç®¡ç†         â”‚
â”‚  â€¢ çª—å£æ£€æµ‹       â”‚  â€¢ Bç«™/YT è§£æ    â”‚  â€¢ æœç´¢å’Œç­›é€‰           â”‚
â”‚  â€¢ å‰ªè´´æ¿è¯»å–     â”‚  â€¢ GitHub è§£æ    â”‚  â€¢ æ ‡ç­¾ç®¡ç†             â”‚
â”‚  â€¢ æ‰˜ç›˜å¸¸é©»       â”‚                   â”‚  â€¢ è®¾ç½®é…ç½®             â”‚
â”‚  â€¢ å…¬ä¼—å·æŠ“å–     â”‚                   â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        åç«¯æœåŠ¡ (FastAPI)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·æœåŠ¡   â”‚  æ”¶è—æœåŠ¡   â”‚  AI æœåŠ¡   â”‚    è§†é¢‘å·è§£ææœåŠ¡        â”‚
â”‚  (è®¤è¯)     â”‚  (CRUD)    â”‚  (æ ‡ç­¾/æ‘˜è¦)â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           æ•°æ®å±‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         SQLite (Mock)        â”‚           æœ¬åœ°æ–‡ä»¶å­˜å‚¨             â”‚
â”‚     â†’ åç»­è¿ç§» Tablestore     â”‚        â†’ åç»­è¿ç§» OSS             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. åŠŸèƒ½éœ€æ±‚

### 2.1 ç”¨æˆ·ç³»ç»Ÿ

| åŠŸèƒ½ | æè¿° | Mock æ–¹æ¡ˆ |
|------|------|-----------|
| æ‰‹æœºå·ç™»å½• | çŸ­ä¿¡éªŒè¯ç ç™»å½• | å›ºå®šéªŒè¯ç  `123456` |
| å¾®ä¿¡ç™»å½• | æ‰«ç ä¸€é”®ç™»å½• | æ¨¡æ‹Ÿè¿”å›å›ºå®šç”¨æˆ·ä¿¡æ¯ |
| ç”¨æˆ·ä¿¡æ¯ | å¤´åƒã€æ˜µç§°ç®¡ç† | æœ¬åœ°å­˜å‚¨ |

### 2.2 å†…å®¹æ”¶è—

#### 2.2.1 è§¦å‘æ–¹å¼

| æ–¹å¼ | æè¿° |
|------|------|
| å…¨å±€å¿«æ·é”® | ç”¨æˆ·è‡ªå®šä¹‰ï¼Œé¦–æ¬¡å¯åŠ¨æ—¶è®¾ç½® |
| æµè§ˆå™¨æ‰©å±•æŒ‰é’® | ç‚¹å‡»å›¾æ ‡æ”¶è—å½“å‰é¡µé¢ |

#### 2.2.2 æ”¯æŒçš„å†…å®¹æ¥æº

**æµè§ˆå™¨ç½‘é¡µ (Chrome/Edge æ‰©å±•æŠ“å–)**

| å†…å®¹ç±»å‹ | æŠ“å–ä¿¡æ¯ |
|----------|----------|
| æ™®é€šç½‘é¡µ | æ ‡é¢˜ã€URLã€æ­£æ–‡æ‘˜è¦ã€ç¼©ç•¥å›¾ |
| é€‰ä¸­æ–‡æœ¬ | é€‰ä¸­å†…å®¹ã€æ¥æºé¡µé¢ URL |
| å›¾ç‰‡ | å›¾ç‰‡ URLã€æ¥æºé¡µé¢ |

**å¾®ä¿¡å…¬ä¼—å·æ–‡ç«  (å®¢æˆ·ç«¯æŠ“å–)**

| æ­¥éª¤ | è¯´æ˜ |
|------|------|
| 1 | ç”¨æˆ·åœ¨å¾®ä¿¡æ‰“å¼€å…¬ä¼—å·æ–‡ç«  |
| 2 | æŒ‰å¿«æ·é”®è§¦å‘ |
| 3 | å®¢æˆ·ç«¯é€šè¿‡ UI Automation è·å–æ–‡ç«  URL |
| 4 | å®¢æˆ·ç«¯ç›´æ¥ HTTP è¯·æ±‚æŠ“å–æ–‡ç« å…¨æ–‡ |
| 5 | AI å¤„ç†åä¿å­˜åˆ°äº‘ç«¯ |

æŠ“å–å†…å®¹ï¼šæ ‡é¢˜ã€ä½œè€…ã€å…¬ä¼—å·åç§°ã€å‘å¸ƒæ—¶é—´ã€æ­£æ–‡ã€å›¾ç‰‡

> å…¬ä¼—å·æ–‡ç« æ˜¯å…¬å¼€å†…å®¹ï¼Œå®¢æˆ·ç«¯ç›´æ¥æŠ“å–æ›´é«˜æ•ˆï¼Œæ— éœ€ç»•è¡Œåç«¯

**å¾®ä¿¡è§†é¢‘å· (å‰ªè´´æ¿ + åç«¯è§£æ)**

| æ­¥éª¤ | è¯´æ˜ |
|------|------|
| 1 | ç”¨æˆ·åœ¨è§†é¢‘å·ç‚¹å‡»"åˆ†äº« â†’ å¤åˆ¶é“¾æ¥" |
| 2 | æŒ‰å¿«æ·é”®è§¦å‘ |
| 3 | å®¢æˆ·ç«¯è¯»å–å‰ªè´´æ¿ä¸­çš„åˆ†äº«é“¾æ¥ |
| 4 | å‘é€åˆ°åç«¯è§£æ |

æŠ“å–å†…å®¹ï¼šæ ‡é¢˜ã€ä½œè€…ã€å°é¢ã€æ—¶é•¿ã€ä¸‹è½½é“¾æ¥

**å¾®ä¿¡èŠå¤©è®°å½• (å‰ªè´´æ¿æ”¶è—)**

| æ­¥éª¤ | è¯´æ˜ |
|------|------|
| 1 | ç”¨æˆ·åœ¨å¾®ä¿¡é€‰ä¸­èŠå¤©å†…å®¹ï¼ŒCtrl+C å¤åˆ¶ |
| 2 | æŒ‰å¿«æ·é”®è§¦å‘ |
| 3 | å®¢æˆ·ç«¯è¯»å–å‰ªè´´æ¿å†…å®¹ |
| 4 | è§£æå¹¶ä¿å­˜ |

**Bç«™è§†é¢‘ (æ‰©å±•æŠ“å–)**

| æŠ“å–ä¿¡æ¯ | è¯´æ˜ |
|----------|------|
| åŸºç¡€ä¿¡æ¯ | æ ‡é¢˜ã€å°é¢ã€UPä¸»ã€æ’­æ”¾é‡ã€æ—¶é•¿ã€ç®€ä»‹ |
| åˆ†Pä¿¡æ¯ | å¤šPè§†é¢‘çš„åˆ†é›†åˆ—è¡¨ |
| ä¸‹è½½é“¾æ¥ | å„æ¸…æ™°åº¦è§†é¢‘åœ°å€ |

**YouTube è§†é¢‘ (æ‰©å±•æŠ“å–)**

| æŠ“å–ä¿¡æ¯ | è¯´æ˜ |
|----------|------|
| åŸºç¡€ä¿¡æ¯ | æ ‡é¢˜ã€å°é¢ã€é¢‘é“ã€æ—¶é•¿ã€æè¿° |
| ä¸‹è½½é“¾æ¥ | å„æ¸…æ™°åº¦è§†é¢‘åœ°å€ |

**GitHub (æ‰©å±•æŠ“å–)**

| å†…å®¹ç±»å‹ | æŠ“å–ä¿¡æ¯ |
|----------|----------|
| ä»“åº“ | ä»“åº“åã€æè¿°ã€Starsã€è¯­è¨€ã€README æ‘˜è¦ |
| Issue/PR | æ ‡é¢˜ã€å†…å®¹ã€çŠ¶æ€ã€æ ‡ç­¾ |
| ä»£ç ç‰‡æ®µ | é€‰ä¸­ä»£ç ã€æ–‡ä»¶è·¯å¾„ã€è¡Œå· |

**Stack Overflow (æ‰©å±•æŠ“å–)**

| æŠ“å–ä¿¡æ¯ | è¯´æ˜ |
|----------|------|
| é—®é¢˜ | æ ‡é¢˜ã€é—®é¢˜æè¿°ã€æ ‡ç­¾ |
| æœ€ä½³ç­”æ¡ˆ | è¢«é‡‡çº³çš„ç­”æ¡ˆå†…å®¹ |

### 2.3 æ™ºèƒ½å¤„ç† (AI)

| åŠŸèƒ½ | æè¿° | Mock æ–¹æ¡ˆ |
|------|------|-----------|
| è‡ªåŠ¨æ ‡ç­¾ | æ ¹æ®å†…å®¹è‡ªåŠ¨ç”Ÿæˆ 3-5 ä¸ªæ ‡ç­¾ | åŸºäºå…³é”®è¯æå– |
| æ™ºèƒ½åˆ†ç±» | è‡ªåŠ¨å½’å…¥åˆé€‚çš„åˆ†ç±» | åŸºäºè§„åˆ™åŒ¹é… |
| å†…å®¹æ‘˜è¦ | é•¿æ–‡è‡ªåŠ¨ç”Ÿæˆæ‘˜è¦ | æå–å‰ 200 å­— |
| ç›¸å…³æ¨è | å±•ç¤ºç›¸ä¼¼çš„æ”¶è—å†…å®¹ | åŸºäºæ ‡ç­¾åŒ¹é… |

**AI é…ç½®**ï¼š
- é»˜è®¤ä½¿ç”¨é€šä¹‰åƒé—® API
- æ”¯æŒåˆ‡æ¢åˆ° OpenAI
- Mock æ¨¡å¼ä½¿ç”¨æœ¬åœ°è§„åˆ™

### 2.4 å†…å®¹ç®¡ç†

| åŠŸèƒ½ | æè¿° |
|------|------|
| è§†å›¾åˆ‡æ¢ | åˆ—è¡¨è§†å›¾ / å¡ç‰‡è§†å›¾ |
| æœç´¢ | æ ‡é¢˜ã€æ­£æ–‡ã€æ ‡ç­¾å…¨æ–‡æœç´¢ |
| ç­›é€‰ | æŒ‰æ¥æºã€æ—¶é—´ã€åˆ†ç±»ç­›é€‰ |
| æ ‡ç­¾ç®¡ç† | æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤æ ‡ç­¾ |
| æ‰¹é‡æ“ä½œ | æ‰¹é‡åˆ é™¤ã€æ‰¹é‡æ‰“æ ‡ç­¾ |

### 2.5 åˆ†äº«åŠŸèƒ½

| åŠŸèƒ½ | æè¿° |
|------|------|
| ç”Ÿæˆåˆ†äº«é“¾æ¥ | å•æ¡æ”¶è—ç”Ÿæˆå…¬å¼€é“¾æ¥ |
| é“¾æ¥æœ‰æ•ˆæœŸ | å¯è®¾ç½®è¿‡æœŸæ—¶é—´ |
| è®¿é—®ç»Ÿè®¡ | æŸ¥çœ‹åˆ†äº«é“¾æ¥è®¿é—®æ¬¡æ•° |

### 2.6 å¯¼å…¥åŠŸèƒ½

| æ¥æº | æ ¼å¼ |
|------|------|
| Chrome ä¹¦ç­¾ | HTML å¯¼å‡ºæ–‡ä»¶ |
| Edge ä¹¦ç­¾ | HTML å¯¼å‡ºæ–‡ä»¶ |

---

## 3. æŠ€æœ¯æ¶æ„

### 3.1 æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|----------|------|
| æ¡Œé¢å®¢æˆ·ç«¯ | Flutter Desktop | Windows å¹³å° |
| æµè§ˆå™¨æ‰©å±• | Chrome Extension V3 | å…¼å®¹ Edge |
| Web ç®¡ç†ç«¯ | Flutter Web | ä¸æ¡Œé¢ç«¯å…±äº«ä»£ç  |
| åç«¯æœåŠ¡ | Python FastAPI | å¼‚æ­¥é«˜æ€§èƒ½ |
| æ•°æ®åº“ | SQLite (Mock) | åç»­è¿ç§» Tablestore |
| æ–‡ä»¶å­˜å‚¨ | æœ¬åœ°ç›®å½• (Mock) | åç»­è¿ç§» OSS |
| AI æœåŠ¡ | æœ¬åœ°è§„åˆ™ (Mock) | åç»­æ¥å…¥é€šä¹‰åƒé—® |

### 3.2 ç›®å½•ç»“æ„

```
quicksave/
â”œâ”€â”€ client/                    # Flutter æ¡Œé¢å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ main.dart
â”‚   â”‚   â”œâ”€â”€ app/               # åº”ç”¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ hotkey/        # å…¨å±€å¿«æ·é”®
â”‚   â”‚   â”‚   â”œâ”€â”€ window/        # çª—å£æ£€æµ‹ (UI Automation)
â”‚   â”‚   â”‚   â”œâ”€â”€ clipboard/     # å‰ªè´´æ¿
â”‚   â”‚   â”‚   â””â”€â”€ tray/          # ç³»ç»Ÿæ‰˜ç›˜
â”‚   â”‚   â”œâ”€â”€ features/          # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/          # ç™»å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ capture/       # å†…å®¹æŠ“å–
â”‚   â”‚   â”‚   â”œâ”€â”€ collection/    # æ”¶è—ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ settings/      # è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ services/          # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ shared/            # å…±äº«ç»„ä»¶
â”‚   â””â”€â”€ windows/               # Windows å¹³å°ä»£ç 
â”‚
â”œâ”€â”€ extension/                 # Chrome æ‰©å±•
â”‚   â”œâ”€â”€ manifest.json
â”‚   â”œâ”€â”€ background.js          # Service Worker
â”‚   â”œâ”€â”€ content.js             # å†…å®¹è„šæœ¬
â”‚   â”œâ”€â”€ popup/                 # å¼¹çª—ç•Œé¢
â”‚   â””â”€â”€ parsers/               # å„ç«™ç‚¹è§£æå™¨
â”‚       â”œâ”€â”€ bilibili.js
â”‚       â”œâ”€â”€ youtube.js
â”‚       â”œâ”€â”€ github.js
â”‚       â””â”€â”€ stackoverflow.js
â”‚
â”œâ”€â”€ web/                       # Flutter Web ç®¡ç†ç«¯
â”‚   â””â”€â”€ (ä¸ client å…±äº«ä»£ç )
â”‚
â”œâ”€â”€ server/                    # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py      # é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py    # JWT è®¤è¯
â”‚   â”‚   â”‚   â””â”€â”€ database.py    # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â”œâ”€â”€ auth.py
â”‚   â”‚   â”‚       â”œâ”€â”€ collections.py
â”‚   â”‚   â”‚       â”œâ”€â”€ tags.py
â”‚   â”‚   â”‚       â”œâ”€â”€ search.py
â”‚   â”‚   â”‚       â””â”€â”€ share.py
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ capture/       # å†…å®¹æŠ“å–
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ wechat_video.py  # è§†é¢‘å·è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/            # AI å¤„ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mock_ai.py
â”‚   â”‚   â”‚   â””â”€â”€ storage/       # å­˜å‚¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ schemas/           # Pydantic schemas
â”‚   â”œâ”€â”€ mock/                  # Mock æ•°æ®
â”‚   â”‚   â”œâ”€â”€ users.json
â”‚   â”‚   â””â”€â”€ collections.json
â”‚   â””â”€â”€ requirements.txt
â”‚
â””â”€â”€ docs/                      # æ–‡æ¡£
    â””â”€â”€ PRD.md
```

### 3.3 å®¢æˆ·ç«¯æ¶æ„è¯¦ç»†

```
lib/
â”œâ”€â”€ main.dart                  # å…¥å£
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.dart               # App Widget
â”‚   â”œâ”€â”€ routes.dart            # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ theme.dart             # ä¸»é¢˜
â”‚
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ app_config.dart    # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ hotkey/
â”‚   â”‚   â”œâ”€â”€ hotkey_manager.dart      # å¿«æ·é”®ç®¡ç†
â”‚   â”‚   â””â”€â”€ hotkey_handler.dart      # å¿«æ·é”®å¤„ç†
â”‚   â”œâ”€â”€ window/
â”‚   â”‚   â”œâ”€â”€ window_detector.dart     # çª—å£æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ wechat_detector.dart     # å¾®ä¿¡çª—å£æ£€æµ‹
â”‚   â”‚   â””â”€â”€ ui_automation.dart       # UI Automation å°è£…
â”‚   â”œâ”€â”€ clipboard/
â”‚   â”‚   â””â”€â”€ clipboard_monitor.dart   # å‰ªè´´æ¿ç›‘æ§
â”‚   â”œâ”€â”€ tray/
â”‚   â”‚   â””â”€â”€ system_tray.dart         # ç³»ç»Ÿæ‰˜ç›˜
â”‚   â””â”€â”€ network/
â”‚       â””â”€â”€ api_client.dart          # API å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login_page.dart
â”‚   â”‚   â””â”€â”€ auth_service.dart
â”‚   â”œâ”€â”€ capture/
â”‚   â”‚   â”œâ”€â”€ capture_service.dart     # æŠ“å–æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ capture_dialog.dart      # æ”¶è—æˆåŠŸå¼¹çª—
â”‚   â”‚   â”œâ”€â”€ parsers/                 # å†…å®¹è§£æå™¨
â”‚   â”‚   â”‚   â””â”€â”€ wechat_article_parser.dart  # å…¬ä¼—å·æ–‡ç« è§£æ
â”‚   â”‚   â””â”€â”€ source_handlers/         # å„æ¥æºå¤„ç†å™¨
â”‚   â”‚       â”œâ”€â”€ browser_handler.dart
â”‚   â”‚       â”œâ”€â”€ wechat_article_handler.dart  # å…¬ä¼—å·æŠ“å–
â”‚   â”‚       â”œâ”€â”€ wechat_video_handler.dart    # è§†é¢‘å·å¤„ç†
â”‚   â”‚       â””â”€â”€ clipboard_handler.dart
â”‚   â”œâ”€â”€ collection/
â”‚   â”‚   â”œâ”€â”€ collection_list_page.dart
â”‚   â”‚   â”œâ”€â”€ collection_detail_page.dart
â”‚   â”‚   â””â”€â”€ collection_service.dart
â”‚   â””â”€â”€ settings/
â”‚       â”œâ”€â”€ settings_page.dart
â”‚       â””â”€â”€ hotkey_settings.dart
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api_service.dart       # åç«¯ API è°ƒç”¨
â”‚   â”œâ”€â”€ ai_service.dart        # AI æœåŠ¡
â”‚   â””â”€â”€ storage_service.dart   # æœ¬åœ°å­˜å‚¨
â”‚
â””â”€â”€ shared/
    â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
    â”‚   â”œâ”€â”€ user.dart
    â”‚   â”œâ”€â”€ collection.dart
    â”‚   â””â”€â”€ tag.dart
    â”œâ”€â”€ widgets/               # é€šç”¨ç»„ä»¶
    â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
```

---

## 4. æ•°æ®æ¨¡å‹

### 4.1 ç”¨æˆ·è¡¨ (users)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | VARCHAR(36) | ä¸»é”® UUID |
| phone | VARCHAR(20) | æ‰‹æœºå· |
| wechat_openid | VARCHAR(64) | å¾®ä¿¡ OpenID |
| nickname | VARCHAR(50) | æ˜µç§° |
| avatar | VARCHAR(255) | å¤´åƒ URL |
| settings | JSON | ç”¨æˆ·è®¾ç½® |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ |

### 4.2 æ”¶è—è¡¨ (collections)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | VARCHAR(36) | ä¸»é”® UUID |
| user_id | VARCHAR(36) | ç”¨æˆ· ID |
| source_type | VARCHAR(30) | æ¥æºç±»å‹ |
| source_url | TEXT | æ¥æº URL |
| title | VARCHAR(500) | æ ‡é¢˜ |
| content | TEXT | æ­£æ–‡å†…å®¹ |
| summary | TEXT | æ‘˜è¦ |
| thumbnail | VARCHAR(255) | ç¼©ç•¥å›¾ URL |
| metadata | JSON | æ‰©å±•å…ƒæ•°æ® |
| category | VARCHAR(50) | åˆ†ç±» |
| collected_at | TIMESTAMP | æ”¶è—æ—¶é—´ |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ |

**source_type æšä¸¾å€¼**ï¼š

| å€¼ | è¯´æ˜ |
|----|------|
| browser | æ™®é€šç½‘é¡µ |
| wechat_article | å¾®ä¿¡å…¬ä¼—å·æ–‡ç«  |
| wechat_video | å¾®ä¿¡è§†é¢‘å· |
| wechat_chat | å¾®ä¿¡èŠå¤©è®°å½• |
| bilibili | Bç«™è§†é¢‘ |
| youtube | YouTube è§†é¢‘ |
| github_repo | GitHub ä»“åº“ |
| github_issue | GitHub Issue/PR |
| github_code | GitHub ä»£ç ç‰‡æ®µ |
| stackoverflow | Stack Overflow |
| bookmark | å¯¼å…¥çš„ä¹¦ç­¾ |

**metadata ç¤ºä¾‹**ï¼š

```json
// Bç«™è§†é¢‘
{
  "bvid": "BV1xx411c7XW",
  "uploader": "UPä¸»åç§°",
  "uploader_id": "12345",
  "view_count": 100000,
  "duration": 360,
  "parts": [
    {"title": "P1 æ ‡é¢˜", "duration": 180},
    {"title": "P2 æ ‡é¢˜", "duration": 180}
  ],
  "download_urls": {
    "1080p": "https://...",
    "720p": "https://..."
  }
}

// GitHub ä»“åº“
{
  "owner": "owner",
  "repo": "repo-name",
  "stars": 1000,
  "forks": 200,
  "language": "Python",
  "topics": ["web", "api"]
}

// å¾®ä¿¡å…¬ä¼—å·
{
  "author": "ä½œè€…å",
  "account": "å…¬ä¼—å·åç§°",
  "publish_time": "2026-01-20"
}
```

### 4.3 æ ‡ç­¾è¡¨ (tags)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | VARCHAR(36) | ä¸»é”® UUID |
| user_id | VARCHAR(36) | ç”¨æˆ· ID |
| name | VARCHAR(50) | æ ‡ç­¾å |
| color | VARCHAR(7) | é¢œè‰² #RRGGBB |
| is_auto | BOOLEAN | æ˜¯å¦ AI è‡ªåŠ¨ç”Ÿæˆ |
| usage_count | INT | ä½¿ç”¨æ¬¡æ•° |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |

### 4.4 æ”¶è—-æ ‡ç­¾å…³è”è¡¨ (collection_tags)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| collection_id | VARCHAR(36) | æ”¶è— ID |
| tag_id | VARCHAR(36) | æ ‡ç­¾ ID |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |

### 4.5 åˆ†äº«é“¾æ¥è¡¨ (share_links)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | VARCHAR(36) | ä¸»é”® UUID |
| collection_id | VARCHAR(36) | æ”¶è— ID |
| user_id | VARCHAR(36) | ç”¨æˆ· ID |
| code | VARCHAR(10) | çŸ­ç  |
| expires_at | TIMESTAMP | è¿‡æœŸæ—¶é—´ |
| view_count | INT | è®¿é—®æ¬¡æ•° |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |

---

## 5. API è®¾è®¡

### 5.1 è®¤è¯æ¥å£

```yaml
# å‘é€çŸ­ä¿¡éªŒè¯ç 
POST /api/v1/auth/sms/send
Request:
  phone: string
Response:
  success: boolean
  message: string

# çŸ­ä¿¡éªŒè¯ç ç™»å½•
POST /api/v1/auth/sms/login
Request:
  phone: string
  code: string          # Mock: å›ºå®š 123456
Response:
  access_token: string
  refresh_token: string
  user: User

# å¾®ä¿¡ç™»å½•
POST /api/v1/auth/wechat/login
Request:
  code: string          # Mock: ä»»æ„å€¼
Response:
  access_token: string
  user: User

# åˆ·æ–° Token
POST /api/v1/auth/refresh
Request:
  refresh_token: string
Response:
  access_token: string

# è·å–å½“å‰ç”¨æˆ·
GET /api/v1/auth/me
Headers:
  Authorization: Bearer {token}
Response:
  user: User
```

### 5.2 æ”¶è—æ¥å£

```yaml
# åˆ›å»ºæ”¶è—
POST /api/v1/collections
Request:
  source_type: string
  source_url: string?
  title: string?
  content: string?
  metadata: object?
  auto_process: boolean   # æ˜¯å¦ AI å¤„ç†
Response:
  collection: Collection

# è·å–æ”¶è—åˆ—è¡¨
GET /api/v1/collections
Query:
  page: int = 1
  size: int = 20
  source_type: string?
  category: string?
  tag_id: string?
  q: string?              # æœç´¢å…³é”®è¯
Response:
  items: Collection[]
  total: int
  page: int
  pages: int

# è·å–æ”¶è—è¯¦æƒ…
GET /api/v1/collections/{id}
Response:
  collection: Collection
  related: Collection[]   # ç›¸å…³æ¨è

# æ›´æ–°æ”¶è—
PUT /api/v1/collections/{id}
Request:
  title: string?
  content: string?
  category: string?
  tag_ids: string[]?
Response:
  collection: Collection

# åˆ é™¤æ”¶è—
DELETE /api/v1/collections/{id}
Response:
  success: boolean

# æ‰¹é‡åˆ é™¤
POST /api/v1/collections/batch-delete
Request:
  ids: string[]
Response:
  deleted_count: int
```

### 5.3 æ ‡ç­¾æ¥å£

```yaml
# è·å–æ ‡ç­¾åˆ—è¡¨
GET /api/v1/tags
Query:
  q: string?
Response:
  tags: Tag[]

# åˆ›å»ºæ ‡ç­¾
POST /api/v1/tags
Request:
  name: string
  color: string?
Response:
  tag: Tag

# æ›´æ–°æ ‡ç­¾
PUT /api/v1/tags/{id}
Request:
  name: string?
  color: string?
Response:
  tag: Tag

# åˆ é™¤æ ‡ç­¾
DELETE /api/v1/tags/{id}
Response:
  success: boolean
```

### 5.4 æœç´¢æ¥å£

```yaml
# å…¨æ–‡æœç´¢
GET /api/v1/search
Query:
  q: string
  source_type: string?
  category: string?
  tag_id: string?
  date_from: date?
  date_to: date?
  page: int = 1
  size: int = 20
Response:
  items: Collection[]
  total: int
  facets:
    source_types: [{type: string, count: int}]
    categories: [{category: string, count: int}]
    tags: [{tag: Tag, count: int}]
```

### 5.5 åˆ†äº«æ¥å£

```yaml
# åˆ›å»ºåˆ†äº«é“¾æ¥
POST /api/v1/share
Request:
  collection_id: string
  expires_in: int?        # è¿‡æœŸç§’æ•°ï¼Œä¸å¡«åˆ™æ°¸ä¹…
Response:
  share_link: ShareLink
  url: string             # å®Œæ•´åˆ†äº« URL

# è®¿é—®åˆ†äº«å†…å®¹ (æ— éœ€ç™»å½•)
GET /api/v1/share/{code}
Response:
  collection: Collection

# åˆ é™¤åˆ†äº«é“¾æ¥
DELETE /api/v1/share/{id}
Response:
  success: boolean
```

### 5.6 å¯¼å…¥æ¥å£

```yaml
# å¯¼å…¥æµè§ˆå™¨ä¹¦ç­¾
POST /api/v1/import/bookmarks
Request:
  file: File              # HTML ä¹¦ç­¾æ–‡ä»¶
Response:
  imported_count: int
  failed_count: int
  collections: Collection[]
```

### 5.7 è§†é¢‘å·è§£ææ¥å£

```yaml
# è§£æè§†é¢‘å·
POST /api/v1/capture/wechat-video
Request:
  share_url: string       # è§†é¢‘å·åˆ†äº«é“¾æ¥
Response:
  title: string
  author: string
  cover: string
  duration: int
  download_url: string
```

> æ³¨ï¼šå…¬ä¼—å·æ–‡ç« ç”±å®¢æˆ·ç«¯ç›´æ¥æŠ“å–ï¼Œæ— éœ€åç«¯æ¥å£

---

## 6. UI è®¾è®¡

### 6.1 æ¡Œé¢å®¢æˆ·ç«¯

**ç³»ç»Ÿæ‰˜ç›˜èœå•**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ ä¸€é”®æ”¶è— (ç”¨æˆ·è®¾ç½®çš„å¿«æ·é”®)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ ä»å‰ªè´´æ¿æ”¶è—              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ä»Šæ—¥å·²æ”¶è—: 12 æ¡         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš™ï¸ è®¾ç½®                     â”‚
â”‚ ğŸŒ æ‰“å¼€ç®¡ç†é¢æ¿             â”‚
â”‚ âŒ é€€å‡º                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ”¶è—æˆåŠŸæµ®çª—**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ æ”¶è—æˆåŠŸ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“„ Flutter çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ      â”‚
â”‚ ğŸ·ï¸ #Flutter #çŠ¶æ€ç®¡ç† #æŠ€æœ¯     â”‚
â”‚ ğŸ“ è‡ªåŠ¨å½’ç±»: å¼€å‘/Flutter        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç¼–è¾‘]  [æŸ¥çœ‹]  [3ç§’åå…³é—­]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¦–æ¬¡å¯åŠ¨å¿«æ·é”®è®¾ç½®**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è®¾ç½®å…¨å±€å¿«æ·é”®                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  è¯·æŒ‰ä¸‹ä½ æƒ³è¦çš„å¿«æ·é”®ç»„åˆ:              â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Ctrl + Alt + S              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚
â”‚  æ¨è: Ctrl+Shift+S, Ctrl+Alt+S        â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            [ç¡®è®¤]  [è·³è¿‡]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Web ç®¡ç†é¢æ¿

**åˆ—è¡¨è§†å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QuickSave                      ğŸ” æœç´¢...               ğŸ‘¤ ç”¨æˆ·   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‘ å…¨éƒ¨ (128)  â”‚  ğŸ“‹ åˆ—è¡¨ | ğŸ´ å¡ç‰‡                    [+ æ–°å»º]   â”‚
â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ åˆ†ç±»       â”‚ â˜ Flutter çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ        â­ ğŸ”— â‹¯        â”‚
â”‚   å¼€å‘ (45)   â”‚   ğŸ“ juejin.cn Â· 2å°æ—¶å‰                          â”‚
â”‚   è§†é¢‘ (30)   â”‚   ğŸ·ï¸ Flutter çŠ¶æ€ç®¡ç†                             â”‚
â”‚   æ–‡ç«  (30)   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚               â”‚ â˜ GitHub - riverpod/riverpod        â­ ğŸ”— â‹¯        â”‚
â”‚ ğŸ·ï¸ æ ‡ç­¾       â”‚   ğŸ“ github.com Â· 3å°æ—¶å‰                         â”‚
â”‚   Flutter     â”‚   ğŸ·ï¸ Flutter å¼€æº                                 â”‚
â”‚   Python      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚   AI          â”‚ â˜ ã€è§†é¢‘å·ã€‘Flutter 3.0 æ–°ç‰¹æ€§       â­ ğŸ”— â‹¯        â”‚
â”‚               â”‚   ğŸ“ è§†é¢‘å· Â· æ˜¨å¤©                                â”‚
â”‚ ğŸ“¦ æ¥æº       â”‚   ğŸ·ï¸ Flutter è§†é¢‘                                 â”‚
â”‚   ç½‘é¡µ        â”‚                                                   â”‚
â”‚   Bç«™         â”‚                                                   â”‚
â”‚   GitHub      â”‚                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·²é€‰æ‹© 0 æ¡                                          å…± 128 æ¡    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¡ç‰‡è§†å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ğŸ“· å°é¢     â”‚ â”‚ ğŸ“· å°é¢     â”‚ â”‚ ğŸ“· å°é¢     â”‚ â”‚ ğŸ“· å°é¢     â”‚  â”‚
â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚ æ ‡é¢˜...     â”‚ â”‚ æ ‡é¢˜...     â”‚ â”‚ æ ‡é¢˜...     â”‚ â”‚ æ ‡é¢˜...     â”‚  â”‚
â”‚ â”‚ ğŸ·ï¸ tag     â”‚ â”‚ ğŸ·ï¸ tag     â”‚ â”‚ ğŸ·ï¸ tag     â”‚ â”‚ ğŸ·ï¸ tag     â”‚  â”‚
â”‚ â”‚ 2å°æ—¶å‰    â”‚ â”‚ 3å°æ—¶å‰    â”‚ â”‚ æ˜¨å¤©       â”‚ â”‚ 2å¤©å‰      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 æµè§ˆå™¨æ‰©å±•

**Popup ç•Œé¢**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QuickSave              [ç™»å½•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“„ å½“å‰é¡µé¢                      â”‚
â”‚ Flutter çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ         â”‚
â”‚ juejin.cn                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ·ï¸ æ ‡ç­¾ (è‡ªåŠ¨æ£€æµ‹)               â”‚
â”‚ [Flutter] [çŠ¶æ€ç®¡ç†] [+æ·»åŠ ]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [â­ æ”¶è—æ­¤é¡µé¢]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æ”¶è—é€‰ä¸­å†…å®¹]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Mock æ–¹æ¡ˆ

### 7.1 ç”¨æˆ·è®¤è¯ Mock

```python
# server/app/services/mock/auth.py

MOCK_USERS = {
    "13800138000": {
        "id": "user-001",
        "phone": "13800138000",
        "nickname": "æµ‹è¯•ç”¨æˆ·",
        "avatar": "https://via.placeholder.com/100"
    }
}

def mock_sms_login(phone: str, code: str):
    """Mock çŸ­ä¿¡ç™»å½•ï¼ŒéªŒè¯ç å›ºå®š 123456"""
    if code != "123456":
        raise ValueError("éªŒè¯ç é”™è¯¯")

    if phone not in MOCK_USERS:
        # è‡ªåŠ¨åˆ›å»ºæ–°ç”¨æˆ·
        MOCK_USERS[phone] = {
            "id": f"user-{len(MOCK_USERS)+1:03d}",
            "phone": phone,
            "nickname": f"ç”¨æˆ·{phone[-4:]}",
            "avatar": "https://via.placeholder.com/100"
        }

    return MOCK_USERS[phone]

def mock_wechat_login(code: str):
    """Mock å¾®ä¿¡ç™»å½•ï¼Œè¿”å›å›ºå®šç”¨æˆ·"""
    return {
        "id": "user-wechat-001",
        "wechat_openid": "mock_openid_123",
        "nickname": "å¾®ä¿¡ç”¨æˆ·",
        "avatar": "https://via.placeholder.com/100"
    }
```

### 7.2 AI æœåŠ¡ Mock

```python
# server/app/services/mock/ai.py

import re
from typing import List

# å…³é”®è¯åˆ°æ ‡ç­¾çš„æ˜ å°„
KEYWORD_TAG_MAP = {
    "flutter": ["Flutter", "ç§»åŠ¨å¼€å‘"],
    "react": ["React", "å‰ç«¯"],
    "vue": ["Vue", "å‰ç«¯"],
    "python": ["Python", "åç«¯"],
    "javascript": ["JavaScript", "å‰ç«¯"],
    "github": ["GitHub", "å¼€æº"],
    "ai": ["AI", "äººå·¥æ™ºèƒ½"],
    "æœºå™¨å­¦ä¹ ": ["æœºå™¨å­¦ä¹ ", "AI"],
}

# æ¥æºåˆ°åˆ†ç±»çš„æ˜ å°„
SOURCE_CATEGORY_MAP = {
    "bilibili": "è§†é¢‘",
    "youtube": "è§†é¢‘",
    "wechat_video": "è§†é¢‘",
    "github_repo": "å¼€å‘",
    "github_issue": "å¼€å‘",
    "github_code": "å¼€å‘",
    "stackoverflow": "å¼€å‘",
    "wechat_article": "æ–‡ç« ",
}

def mock_generate_tags(title: str, content: str) -> List[str]:
    """Mock æ ‡ç­¾ç”Ÿæˆï¼šåŸºäºå…³é”®è¯åŒ¹é…"""
    text = (title + " " + content).lower()
    tags = set()

    for keyword, tag_list in KEYWORD_TAG_MAP.items():
        if keyword in text:
            tags.update(tag_list)

    # æœ€å¤šè¿”å› 5 ä¸ªæ ‡ç­¾
    return list(tags)[:5] if tags else ["æœªåˆ†ç±»"]

def mock_generate_summary(content: str) -> str:
    """Mock æ‘˜è¦ç”Ÿæˆï¼šæå–å‰ 200 å­—"""
    # ç§»é™¤ HTML æ ‡ç­¾
    clean_text = re.sub(r'<[^>]+>', '', content)
    # ç§»é™¤å¤šä½™ç©ºç™½
    clean_text = re.sub(r'\s+', ' ', clean_text).strip()

    if len(clean_text) <= 200:
        return clean_text
    return clean_text[:200] + "..."

def mock_classify(source_type: str, title: str) -> str:
    """Mock åˆ†ç±»ï¼šåŸºäºæ¥æºç±»å‹"""
    return SOURCE_CATEGORY_MAP.get(source_type, "å…¶ä»–")
```

### 7.3 å†…å®¹æŠ“å– Mock

**å®¢æˆ·ç«¯ - å…¬ä¼—å·æ–‡ç« æŠ“å– Mock (Dart)**

```dart
// client/lib/features/capture/parsers/mock_wechat_article.dart

class MockWechatArticle {
  static Map<String, dynamic> parse(String url) {
    // Mock æ¨¡å¼ä¸‹è¿”å›å›ºå®šæ•°æ®
    return {
      'title': 'Mock å…¬ä¼—å·æ–‡ç« æ ‡é¢˜',
      'author': 'Mock ä½œè€…',
      'account': 'Mock å…¬ä¼—å·',
      'content': 'è¿™æ˜¯ä¸€ç¯‡ Mock çš„å…¬ä¼—å·æ–‡ç« å†…å®¹ï¼Œç”¨äºæµ‹è¯•æ”¶è—æµç¨‹...',
      'images': ['https://via.placeholder.com/800x400'],
      'publish_time': '2026-01-20',
    };
  }
}
```

**æœåŠ¡ç«¯ - è§†é¢‘å·è§£æ Mock (Python)**

```python
# server/app/services/mock/capture.py

MOCK_WECHAT_VIDEOS = {
    "default": {
        "title": "Mock è§†é¢‘å·è§†é¢‘æ ‡é¢˜",
        "author": "Mock ä½œè€…",
        "cover": "https://via.placeholder.com/400x300",
        "duration": 180,
        "download_url": "https://example.com/mock-video.mp4"
    }
}

def mock_capture_wechat_video(share_url: str):
    """Mock è§£æè§†é¢‘å·"""
    return MOCK_WECHAT_VIDEOS["default"]
```

### 7.4 æµ‹è¯•æ•°æ®

```python
# server/mock/seed_data.py

MOCK_COLLECTIONS = [
    {
        "id": "col-001",
        "user_id": "user-001",
        "source_type": "browser",
        "source_url": "https://juejin.cn/post/123456",
        "title": "Flutter çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ",
        "content": "æœ¬æ–‡ä»‹ç» Flutter ä¸­å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ...",
        "summary": "æœ¬æ–‡ä»‹ç» Flutter ä¸­å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ Providerã€Riverpodã€Bloc ç­‰...",
        "thumbnail": "https://via.placeholder.com/300x200",
        "category": "å¼€å‘",
        "tags": ["Flutter", "çŠ¶æ€ç®¡ç†"],
        "collected_at": "2026-01-22T10:00:00Z"
    },
    {
        "id": "col-002",
        "user_id": "user-001",
        "source_type": "bilibili",
        "source_url": "https://www.bilibili.com/video/BV1xx411c7XW",
        "title": "ã€Flutterã€‘ä»é›¶å¼€å§‹å­¦ Flutter",
        "content": "",
        "summary": "Flutter å…¥é—¨æ•™ç¨‹ï¼Œé€‚åˆåˆå­¦è€…",
        "thumbnail": "https://via.placeholder.com/300x200",
        "category": "è§†é¢‘",
        "tags": ["Flutter", "æ•™ç¨‹"],
        "metadata": {
            "bvid": "BV1xx411c7XW",
            "uploader": "Flutterå®˜æ–¹",
            "view_count": 100000,
            "duration": 3600
        },
        "collected_at": "2026-01-21T15:00:00Z"
    },
    {
        "id": "col-003",
        "user_id": "user-001",
        "source_type": "github_repo",
        "source_url": "https://github.com/pydantic/pydantic",
        "title": "pydantic/pydantic",
        "content": "Data validation using Python type hints",
        "summary": "Python æ•°æ®éªŒè¯åº“ï¼ŒåŸºäºç±»å‹æ³¨è§£",
        "thumbnail": "https://via.placeholder.com/300x200",
        "category": "å¼€å‘",
        "tags": ["Python", "å¼€æº"],
        "metadata": {
            "owner": "pydantic",
            "repo": "pydantic",
            "stars": 15000,
            "language": "Python"
        },
        "collected_at": "2026-01-20T09:00:00Z"
    },
    {
        "id": "col-004",
        "user_id": "user-001",
        "source_type": "wechat_article",
        "source_url": "https://mp.weixin.qq.com/s/xxxxx",
        "title": "æ·±å…¥ç†è§£ Python å¼‚æ­¥ç¼–ç¨‹",
        "content": "æœ¬æ–‡æ·±å…¥è®²è§£ Python asyncio çš„å®ç°åŸç†...",
        "summary": "æ·±å…¥è®²è§£ Python asyncio çš„å®ç°åŸç†å’Œæœ€ä½³å®è·µ",
        "thumbnail": "https://via.placeholder.com/300x200",
        "category": "æ–‡ç« ",
        "tags": ["Python", "å¼‚æ­¥"],
        "metadata": {
            "author": "Pythonä¹‹ç¦…",
            "account": "Pythonç¼–ç¨‹"
        },
        "collected_at": "2026-01-19T14:00:00Z"
    },
    {
        "id": "col-005",
        "user_id": "user-001",
        "source_type": "wechat_video",
        "source_url": "https://channels.weixin.qq.com/xxxxx",
        "title": "10åˆ†é’Ÿå­¦ä¼š FastAPI",
        "content": "",
        "summary": "FastAPI å¿«é€Ÿå…¥é—¨æ•™ç¨‹",
        "thumbnail": "https://via.placeholder.com/300x200",
        "category": "è§†é¢‘",
        "tags": ["Python", "FastAPI"],
        "metadata": {
            "author": "ç¼–ç¨‹æ•™å®¤",
            "duration": 600,
            "download_url": "https://example.com/video.mp4"
        },
        "collected_at": "2026-01-18T20:00:00Z"
    }
]

MOCK_TAGS = [
    {"id": "tag-001", "name": "Flutter", "color": "#02569B", "usage_count": 15},
    {"id": "tag-002", "name": "Python", "color": "#3776AB", "usage_count": 12},
    {"id": "tag-003", "name": "çŠ¶æ€ç®¡ç†", "color": "#4CAF50", "usage_count": 8},
    {"id": "tag-004", "name": "å¼€æº", "color": "#FF5722", "usage_count": 6},
    {"id": "tag-005", "name": "æ•™ç¨‹", "color": "#9C27B0", "usage_count": 5},
    {"id": "tag-006", "name": "FastAPI", "color": "#009688", "usage_count": 4},
    {"id": "tag-007", "name": "AI", "color": "#E91E63", "usage_count": 3},
]
```

### 7.5 Mock é…ç½®å¼€å…³

```python
# server/app/core/config.py

from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    # åº”ç”¨é…ç½®
    APP_NAME: str = "QuickSave"
    DEBUG: bool = True

    # Mock æ¨¡å¼å¼€å…³
    MOCK_MODE: bool = True          # æ€»å¼€å…³
    MOCK_AUTH: bool = True          # Mock è®¤è¯
    MOCK_AI: bool = True            # Mock AI æœåŠ¡
    MOCK_CAPTURE: bool = True       # Mock å†…å®¹æŠ“å–

    # æ•°æ®åº“é…ç½® (Mock ä½¿ç”¨ SQLite)
    DATABASE_URL: str = "sqlite:///./quicksave.db"

    # JWT é…ç½®
    JWT_SECRET: str = "dev-secret-key-change-in-production"
    JWT_EXPIRE_HOURS: int = 24

    # æ–‡ä»¶å­˜å‚¨ (Mock ä½¿ç”¨æœ¬åœ°ç›®å½•)
    UPLOAD_DIR: str = "./uploads"

    class Config:
        env_file = ".env"

settings = Settings()
```

---

## 8. å¼€å‘é‡Œç¨‹ç¢‘

### M1: åŸºç¡€æ¡†æ¶æ­å»º

- [ ] é¡¹ç›®ç»“æ„åˆå§‹åŒ–
- [ ] Flutter Desktop æ¡†æ¶æ­å»º
- [ ] FastAPI åç«¯æ¡†æ¶æ­å»º
- [ ] SQLite æ•°æ®åº“ + Mock æ•°æ®
- [ ] JWT è®¤è¯ (Mock æ¨¡å¼)

### M2: æ ¸å¿ƒå®¢æˆ·ç«¯åŠŸèƒ½

- [ ] ç³»ç»Ÿæ‰˜ç›˜å®ç°
- [ ] å…¨å±€å¿«æ·é”®æ³¨å†Œ
- [ ] å¿«æ·é”®è®¾ç½®ç•Œé¢
- [ ] çª—å£æ£€æµ‹ (UI Automation)
- [ ] å‰ªè´´æ¿è¯»å–

### M3: æµè§ˆå™¨æ‰©å±•

- [ ] Chrome Extension V3 æ¡†æ¶
- [ ] ç½‘é¡µå†…å®¹æŠ“å–
- [ ] Bç«™è§†é¢‘è§£æ
- [ ] YouTube è§†é¢‘è§£æ
- [ ] GitHub å†…å®¹è§£æ
- [ ] Stack Overflow è§£æ

### M4: å¾®ä¿¡å†…å®¹æ”¯æŒ

- [ ] å¾®ä¿¡çª—å£æ£€æµ‹
- [ ] å…¬ä¼—å· URL æå–
- [ ] å…¬ä¼—å·æ–‡ç« æŠ“å– (åç«¯)
- [ ] è§†é¢‘å·é“¾æ¥è§£æ (åç«¯)
- [ ] èŠå¤©è®°å½•å‰ªè´´æ¿æ”¶è—

### M5: AI æ™ºèƒ½å¤„ç†

- [ ] Mock AI æœåŠ¡å®ç°
- [ ] è‡ªåŠ¨æ ‡ç­¾ç”Ÿæˆ
- [ ] æ™ºèƒ½åˆ†ç±»
- [ ] å†…å®¹æ‘˜è¦

### M6: Web ç®¡ç†é¢æ¿

- [ ] Flutter Web æ­å»º
- [ ] æ”¶è—åˆ—è¡¨é¡µ
- [ ] æ”¶è—è¯¦æƒ…é¡µ
- [ ] æœç´¢å’Œç­›é€‰
- [ ] æ ‡ç­¾ç®¡ç†
- [ ] è§†å›¾åˆ‡æ¢

### M7: åˆ†äº«å’Œå¯¼å…¥

- [ ] åˆ†äº«é“¾æ¥ç”Ÿæˆ
- [ ] åˆ†äº«é¡µé¢
- [ ] ä¹¦ç­¾å¯¼å…¥

### M8: é›†æˆæµ‹è¯•å’Œä¼˜åŒ–

- [ ] ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] Bug ä¿®å¤
- [ ] æ–‡æ¡£å®Œå–„

---

## 9. éåŠŸèƒ½æ€§éœ€æ±‚

### 9.1 æ€§èƒ½è¦æ±‚

| æŒ‡æ ‡ | ç›®æ ‡å€¼ |
|------|--------|
| å¿«æ·é”®å“åº” | < 200ms |
| æ”¶è—å®Œæˆæç¤º | < 500ms |
| åˆ—è¡¨åŠ è½½ | < 1s (50æ¡) |
| æœç´¢å“åº” | < 500ms |
| å®¢æˆ·ç«¯å†…å­˜ | < 150MB |

### 9.2 å…¼å®¹æ€§è¦æ±‚

| å¹³å° | ç‰ˆæœ¬ |
|------|------|
| Windows | 10/11 |
| Chrome | 100+ |
| Edge | 100+ |

---

## é™„å½•

### A. çª—å£ç±»åå‚è€ƒ

```dart
// å¾®ä¿¡ç›¸å…³çª—å£ç±»å
const WECHAT_MAIN = 'WeChatMainWndForPC';
const WECHAT_ARTICLE = 'CefWebViewWnd';
const WECHAT_VIDEO = 'FinderWindow';
```

### B. æ‰©å±•ä¸å®¢æˆ·ç«¯é€šä¿¡

å®¢æˆ·ç«¯å¯åŠ¨æœ¬åœ° HTTP æœåŠ¡ (ç«¯å£ 52345)ï¼Œæ‰©å±•é€šè¿‡ HTTP ä¸å®¢æˆ·ç«¯é€šä¿¡ï¼š

```javascript
// extension/background.js
async function sendToClient(data) {
  try {
    const response = await fetch('http://localhost:52345/capture', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    return await response.json();
  } catch (error) {
    console.error('Failed to connect to client:', error);
  }
}
```

### C. ç¯å¢ƒå˜é‡

```env
# .env.development

# Mock æ¨¡å¼
MOCK_MODE=true
MOCK_AUTH=true
MOCK_AI=true
MOCK_CAPTURE=true

# æ•°æ®åº“
DATABASE_URL=sqlite:///./quicksave.db

# JWT
JWT_SECRET=dev-secret-key
JWT_EXPIRE_HOURS=24

# æ–‡ä»¶å­˜å‚¨
UPLOAD_DIR=./uploads
```

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0*
*åˆ›å»ºæ—¥æœŸ: 2026-01-22*
